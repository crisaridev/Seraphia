<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seraphia | Detalles del pedido</title>
  <link rel="shortcut icon" href="../assets/images/Seraphia_img/logos/Seraphia-logo.png" type="image/x-icon">
  <!-- Fuentes, iconos y css de bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Alata&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
    rel="stylesheet">
  <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,600,0,0&icon_names=home" />
  <!-- CSS del sidebar y navbar -->
  <link rel="stylesheet" href="../css/table_admin_pages.css">
  <link rel="stylesheet" href="../css/admin_sidebar_navbar_css.css">
  <link rel="stylesheet" href="../css/orders_details_admin.css">
</head>

<body>

  <main class="d-flex">


    <!--
  * =====================================================
  * -----------------------Sidebar-----------------------
  * =====================================================    
-->
    <nav class="sidebar-container sidebar" id="sidebar">
      <ul class="sidebar_elements p-0">
        <li class="sidebar_element" id="sidebar_expand_btn">
          <img src="../assets/images/Seraphia_img/logos/LOGO-CIRCULO.png"
              alt="Seraphia logo" class="seraphia_logo">
        </li>
          <li class="sidebar_element sidebar_element-menu sidebar_menu sidebar_icon" id="dashboard-sidebar">
            <a class="d-flex text-decoration-none">
            <i class='bx  bx-dashboard'></i>
            <div class="sidebar_hide">
              <p class="dashboard_label my-0">Escritorio</p>
            </div>
            </a>
          </li>
          <li id="products-sidebar" class="sidebar_element sidebar_element-menu sidebar_menu sidebar_icon">
            <a class="d-flex text-decoration-none">
            <i class='bx bx-dress'></i>
            <div class="sidebar_hide">
              <p class="dashboard_label my-0">Productos</p>
            </div>
            </a>
          </li>
        <li id="orders-sidebar" class="sidebar_element sidebar_element-menu sidebar_menu sidebar_icon active_page">
          <a class="d-flex text-decoration-none">
          <i class='bx  bx-list-ul-square'></i>
          <div class="sidebar_hide p-0">
            <p class="dashboard_label my-0">Pedidos</p>
          </div>
          </a>
        </li>
        <li id="users-sidebar" class="sidebar_element sidebar_element-menu sidebar_menu sidebar_icon">
          <a class="d-flex text-decoration-none">
          <i class='bx  bx-group'></i>
          <div class="sidebar_hide p-0">
            <p class="dashboard_label my-0">Usuarios</p>
          </div>
          </a>
        </li>
      </ul>
    </nav>
    <!-- Botón para retraer y expandir sidebar -->
    <button class="toggle-btn" id="toggle-btn"><i class='bx  bx-caret-left' id="icon"></i></button>
    <!--! Fin de sidebar -->


    <!--
  * =====================================================
  * -----------------------Navbar-----------------------
  * =====================================================    
-->
    <div class="main-content">
      <ul class="nav justify-content-end navbar pe-4">
        <li class="nav-item nav_button nav_button_hide mx-2">
          <a class="nav-link active nav_home navbar_element" aria-current="page" href="/indexPrincipal.html">Ir a
            Seraphia </a>
        </li>
        <li class="nav-item nav_button nav_button_hide mx-2">
          <a class="nav-link nav_create navbar_element" href="./crear-producto.html">Crear +</a>
        </li>
      </ul>
      <!--! Fin de navbar -->

      <!--
  * =====================================================
  * ----------------Contenido principal------------------
  * =====================================================    
-->

      <!--? Contenedor para cards -->

    


      <div class="container-fluid row m-auto p-lg-5 p-md-3 p-2 pt-lg-5 pt-md-5 pt-4 gap-xxl-4 gap-2">

        <div class="container_titles col-12 row d-flex ">
        <a href="./orders_admin_page.html" class="col go_back fs-5 text-decoration-none text-black"><i class='bx  bx-arrow-from-right-stroke fs-1 go_back_icon'  ></i>  Regresar a pedidos</a>

        <div class="col dropdown">
        
  <button class="btn btn-secondary dropdown-toggle status_dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="dropdown_status">
    Actualizar estatus
  </button>
  <ul class="dropdown-menu">
    <li><a class="status_btns dropdown_list dropdown-item Pendiente">Pendiente</a></li>
    <li><a class="status_btns dropdown_list dropdown-item Pagado">Pagado</a></li>
    <li><a class="status_btns dropdown_list dropdown-item Enviado">Enviado</a></li>
    <li><a class="status_btns dropdown_list dropdown-item Entregado">Entregado</a></li>
    <li><a class="status_btns dropdown_list dropdown-item Cancelado">Cancelado</a></li>
  </ul>
</div>
</div>
      <div class="col-12 row gap-xxl-4 gap-2">
        <div class="order col p-xxl-4 p-md-3 p-3">
          <h1 class="mb-4">Detalles del pedido</h1>
          
          <div class="container-fluid order_details px-xxl-4 p-2">
            <table class="table fs-4">
              <thead>
                <tr class="fs-2 ">
                  <th scope="col" class="fw-bolder py-4">Producto(s)</th>
                  <th scope="col" class="text-center py-4">Precio</th>
                </tr>
              </thead>
              <tbody id="order-products-tbody">

                </tbody>
            </table>
          </div>
      
        </div>
      
       <div class="order col p-xxl-4 p-md-3 p-3">
          <h1 class="mb-4">Detalles del envio</h1>
          <div class="container-fluid order_details px-xxl-4 p-2">
            <table class="table fs-4">
              <thead>
                <tr class="fs-2 ">
                  <th scope="col" class="fw-bolder py-4">Dato</th>
                  <th scope="col" class="text-center py-4"></th>
                </tr>
              </thead>
              <tbody id="order-shipping-tbody">
                <!-- Detalles de envío se llenarán dinámicamente -->
              </tbody>
            </table>
          </div>
      
        </div>
      
      
      </div>
      </div>

  <!--! Fin de contenido principal -->



    </div>
  </main>
  <script>

    function getOrderIdFromUrl() {
      const params = new URLSearchParams(window.location.search);
      return params.get('id');
    }

    function getOrderById(orderId) {
      const orders = JSON.parse(localStorage.getItem('orders') || '[]');
      return orders.find(o => o.id === orderId);
    }

    function renderOrderDetails(order) {

      let productsHtml = '';
      productsHtml += `
        <tr>
          <th scope="row" class="py-4 fw-bold text-decoration-underline">
            <img src="${order.img}" alt="preview del producto" width="50px" class="">
            ${order.name}
          </th>
          <td class="text-center py-4">${order.netSalesValue}</td>
        </tr>
        <tr>
          <th scope="row" class="py-4 fw-medium fs-3">Total</th>
          <td class="text-center py-4">${order.netSalesValue}</td>
        </tr>
        <tr>
          <th scope="row" class="py-4 fw-medium fs-3">Num. de pedido</th>
          <td class="text-center py-4">${order.orderNumber}</td>
        </tr>
        <tr>
          <th scope="row" class="py-4 fw-medium fs-3">Fecha de la venta</th>
          <td class="text-center py-4">${order.orderDate}</td>
        </tr>
      `;
      document.getElementById('order-products-tbody').innerHTML = productsHtml;

      let shippingHtml = '';
      shippingHtml += `
        <tr>
          <th scope="row" class="py-4">Nombre</th>
          <td class="text-center py-4">${order.customerName}</td>
        </tr>
        <tr>
          <th scope="row" class="py-4">Email</th>
          <td class="text-center py-4">${order.email}</td>
        </tr>
        <tr>
          <th scope="row" class="py-4">Teléfono</th>
          <td class="text-center py-4">${order.phoneNumber}</td>
        </tr>
        <tr>
          <th scope="row" class="py-4">Direccion</th>
          <td class="text-center py-4">${order.street}, ${order.numInt} ${order.numExt}, ${order.suburb} </td>
        </tr>
        <tr>
          <th scope="row" class="py-4">Codigo postal</th>
          <td class="text-center py-4">${order.zipCode}</td>
        </tr>
        <tr>
          <th scope="row" class="py-4">Ciudad y estado</th>
          <td class="text-center py-4">${order.city}, ${order.state} </td>
        </tr>
      `;
      document.getElementById('order-shipping-tbody').innerHTML = shippingHtml;
    }

    document.addEventListener('DOMContentLoaded', function() {
      const orderId = getOrderIdFromUrl();
      const order = getOrderById(orderId);
      if (order) {
        renderOrderDetails(order);
      } else {
        document.getElementById('order-products-tbody').innerHTML = '<tr><td colspan="2">Pedido no encontrado</td></tr>';
        document.getElementById('order-shipping-tbody').innerHTML = '';
      }
    });

    
  </script>
  <script src="/javascript/Admin/admin_orders_orderController.js"></script>
  <script src="/javascript/Admin/admin_orders_page.js"></script>
  <!-- <script src="/javascript/Admin/admin_general_functions.js"></script> -->
  <!-- <script src="/javascript/Admin/admin_products_page.js"></script> -->
  <script src="../javascript/Admin/admin_sidebar_navbar_js.js"></script>
  <!-- <script src="../javascript/Admin/admin_page_productController.js"></script> -->
  <!-- <script src="../javascript/Admin/admin_page_items.js"></script> -->

  <!-- Bootstrap -->
  <script defer src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
    crossorigin="anonymous"></script>
</body>



</html>
